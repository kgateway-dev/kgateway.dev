<script>
  let vh = window.innerHeight * 0.01;
  document.documentElement.style.setProperty('--vh', `${vh}px`);

  document.addEventListener('scroll', function (e) {
    const nav = document.querySelector('.navbar');
    if (nav.classList.contains('scrolled') && window.scrollY <= 0) {
      nav.classList.remove('scrolled');
    } else {
      nav.classList.add('scrolled');
    }
  });

  function openMobileNav() {
    document.querySelector('.mobile-nav').classList.toggle('visible');
    document.querySelector('.hamburger').classList.toggle('visible');
    document.querySelector('.x').classList.toggle('visible');
    document.querySelector('body').style.overflow = document.querySelector('body').style.overflow === 'hidden' ? 'scroll' : 'hidden';
  }
</script>

<style>
  .nav-container {
    display: none
  }

  .navbar.scrolled {
    background-color: white;
    border-color: transparent;
    transition-property: background-color, border;
    transition-duration: 500ms;
    transition-timing-function: linear;
  }
  
  .navbar.scrolled .link {
    color: #121212;
    transition: color 500ms linear;
  }

  .navbar.scrolled a.link svg {
    fill: #121212;
    transition: fill 500ms linear;
  }

  .navbar.scrolled #logo path {
    fill: #5044E9;
    transition: fill 400ms linear;
  }

  .mobile-nav {
    left: 100%;
    transition: left 400ms ease-out;
    height: 100vh;
    height: calc(var(--vh, 1vh) * 100);
  }

  .mobile-nav .x {
    display: none;
  }

  .mobile-nav .hamburger {
    display: block
  }

  .mobile-nav.visible {
    left: 0;
    transition: left 400ms ease-in;
  }

  .visible.x {
    display: block;
  }

  .visible.hamburger {
    display: block;
  }

  .dropdown {
    position: relative;
    display: inline-block;
  }

  .dropdown-content {
    display: none;
    min-width: 160px;
  }

  .dropdown:hover .dropdown-content {display: block;}
  
  /* Create a hover bridge between trigger and dropdown */
  .dropdown::before {
    content: '';
    position: absolute;
    top: 100%;
    right: 0;
    left: 0;
    height: 0.5rem;
    z-index: 49;
  }
  
  /* Dark mode hover styles for dropdown items */
  .dark .dropdown-content a:hover {
    background-color: rgb(17, 24, 39) !important; /* gray-900 - very dark */
    color: rgb(255, 255, 255) !important; /* white - maximum contrast */
  }
</style>

<nav class="navbar py-[1.875rem] px-12 xl:px-25 fixed top-0 border-b-white border-b w-full hidden lg:block z-20">
  <div class="flex max-w-[1440px] mx-auto content-center items-center justify-between gap-6">
    <div class="flex items-center gap-8">
      <a href="/">{{ partial "utils/icon.html" (dict "name" "logo" "attributes" "id='logo'" ) }}</a>
      <a class="link flex items-center gap-2 whitespace-nowrap text-secondary-link" href="https://github.com/kgateway-dev/kgateway">
        <span class="dark:hidden">{{ partial "utils/icon.html" (dict "name" "github" "attributes" "class='fill-secondary-link h-6 w-6'") }}</span>
        <span class="hidden dark:inline">{{ partial "utils/icon.html" (dict "name" "github-white" "attributes" "class='fill-secondary-link h-6 w-6'") }}</span>
        GitHub
      </a>
      <a class="link flex items-center whitespace-nowrap text-secondary-link" href="/slack">
        {{ partial "utils/icon.html" (dict "name" "slack" "attributes" "class='fill-secondary-link w-10 h-10'") }}
        Slack
      </a>
    </div>
    <div class="flex flex-grow lg:flex-grow-0 items-center align-center justify-between lg:gap-8 xl:gap-[3.5625rem]">
      <div class="dropdown">
        <button class="link whitespace-nowrap text-secondary-link" href="/resources">Resources {{ partial "utils/icon.html" (dict "name" "chevron-down" "attributes" "class='ml-1 mb-0.5 inline w-5 h-5'") }}</button>
        <div class="dropdown-content rounded-l bg-white absolute">
          <a href="/resources/labs" class="text-primary-text px-4 py-3 block hover:text-primary-bg text-left">Labs</a>
          <a href="/resources/videos" class="text-primary-text px-4 py-3 block hover:text-primary-bg text-left">Videos</a>
          <a href="/learn" class="text-primary-text px-4 py-3 block hover:text-primary-bg text-left">Learning paths</a>
          <a href="https://github.com/kgateway-dev/community" class="text-primary-text px-4 py-3 block hover:text-primary-bg text-left">Community</a>
        </div>
      </div>
      <a class="link whitespace-nowrap text-secondary-link" href="/blog">Blog</a>
      <div class="dropdown">
        <a class="link whitespace-nowrap text-secondary-link" href="/docs/">Docs {{ partial "utils/icon.html" (dict "name" "chevron-down" "attributes" "class='ml-1 mb-0.5 inline w-5 h-5'") }}</a>
        <div class="dropdown-content rounded-l bg-white dark:bg-gray-900 absolute" style="top: calc(100% + 0.25rem); padding-top: 0.25rem;">
          <a href="/docs/envoy/latest" class="text-primary-text dark:text-gray-300 px-4 py-3 block hover:text-primary-bg dark:hover:bg-gray-800 dark:hover:text-white text-left">Kgateway (Envoy)</a>
          <a href="/docs/agentgateway/latest" class="text-primary-text dark:text-gray-300 px-4 py-3 block hover:text-primary-bg dark:hover:bg-gray-800 dark:hover:text-white text-left">Agentgateway</a>
        </div>
      </div>
      <!-- <a class="whitespace-nowrap bg-secondary-bg text-white rounded-lg p-5" href="/">Contact Us</a> -->
    </div>
  </div>
</nav>

<nav class="absolute top-0 w-full block lg:hidden z-50">
  <div class="py-6 pr-4 flex justify-between items-center">
    {{ partial "utils/icon.html" (dict "name" "logo" "attributes" "height=26" ) }}
    <button class="p-4 bg-primary-text rounded-lg flex items-center" onClick="openMobileNav()">
      <div class="visible hamburger hidden">
        {{ partial "utils/icon.html" (dict "name" "hamburger" ) }}
      </div>
      <div class="x hidden">
        {{ partial "utils/icon.html" (dict "name" "x" "attributes" "class='w-4'") }}
      </div>
    </button>
  </div>
</nav>

<div class="mobile-nav absolute bg-primary-text w-screen z-40">
  <div class="h-full flex flex-col px-4 items-stretch justify-end w-screen">
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5" href="/resources/labs">Labs</a>
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5" href="/resources/videos">Videos</a>
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5" href="/blog">Blog</a>
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5" href="/docs/">Docs</a>
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5 pl-8" href="/docs/envoy/latest">Kgateway (Envoy)</a>
    <a class="whitespace-nowrap text-[1.5625rem] text-white border-b border-[#545454] py-5 pl-8" href="/docs/agentgateway/latest">Agentgateway</a>
    <!-- <a class="whitespace-nowrap text-center text-white rounded-lg mb-10 mt-[3.125rem] p-6 bg-primary-bg font-semibold" href="/">
      Contact Us
    </a> -->
  </div>
</div>